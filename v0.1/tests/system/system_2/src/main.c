#define SYS_CNTRL		(*((volatile unsigned long *) 0x80010000))

#define UART_CNTRL		(*((volatile unsigned long *) 0x80020000))
#define UART_SEND		(*((volatile unsigned long *) 0x80020010))
#define UART_REC		(*((volatile unsigned long *) 0x80020020))

#define GPIO_0_DIR_SET  (*((volatile unsigned long *) 0x80030000))
#define GPIO_0_DIR_CLR  (*((volatile unsigned long *) 0x80030004))
#define GPIO_0_TRI_SET	(*((volatile unsigned long *) 0x80030008))
#define GPIO_0_TRI_CLR	(*((volatile unsigned long *) 0x8003000C))
#define GPIO_0_OUT_SET	(*((volatile unsigned long *) 0x80030010))
#define GPIO_0_OUT_CLR	(*((volatile unsigned long *) 0x80030014))
#define GPIO_0_IN		(*((volatile unsigned long *) 0x80030020))
#define GPIO_0_RISE		(*((volatile unsigned long *) 0x80030030))
#define GPIO_0_FALL		(*((volatile unsigned long *) 0x80030034))
#define GPIO_1_DIR_SET	(*((volatile unsigned long *) 0x80030100))
#define GPIO_1_DIR_CLR	(*((volatile unsigned long *) 0x80030104))
#define GPIO_1_TRI_SET	(*((volatile unsigned long *) 0x80030108))
#define GPIO_1_TRI_CLR	(*((volatile unsigned long *) 0x8003010C))
#define GPIO_1_OUT_SET	(*((volatile unsigned long *) 0x80030110))
#define GPIO_1_OUT_CLR	(*((volatile unsigned long *) 0x80030114))
#define GPIO_1_IN		(*((volatile unsigned long *) 0x80030120))
#define GPIO_1_RISE		(*((volatile unsigned long *) 0x80030130))
#define GPIO_1_FALL		(*((volatile unsigned long *) 0x80030134))
#define GPIO_2_DIR_SET	(*((volatile unsigned long *) 0x80030200))
#define GPIO_2_DIR_CLR	(*((volatile unsigned long *) 0x80030204))
#define GPIO_2_TRI_SET	(*((volatile unsigned long *) 0x80030208))
#define GPIO_2_TRI_CLR	(*((volatile unsigned long *) 0x8003020C))
#define GPIO_2_OUT_SET	(*((volatile unsigned long *) 0x80030210))
#define GPIO_2_OUT_CLR	(*((volatile unsigned long *) 0x80030214))
#define GPIO_2_IN		(*((volatile unsigned long *) 0x80030220))
#define GPIO_2_RISE		(*((volatile unsigned long *) 0x80030230))
#define GPIO_2_FALL		(*((volatile unsigned long *) 0x80030234))
#define GPIO_3_DIR_SET	(*((volatile unsigned long *) 0x80030300))
#define GPIO_3_DIR_CLR	(*((volatile unsigned long *) 0x80030304))
#define GPIO_3_TRI_SET	(*((volatile unsigned long *) 0x80030308))
#define GPIO_3_TRI_CLR	(*((volatile unsigned long *) 0x8003030C))
#define GPIO_3_OUT_SET	(*((volatile unsigned long *) 0x80030310))
#define GPIO_3_OUT_CLR	(*((volatile unsigned long *) 0x80030314))
#define GPIO_3_IN		(*((volatile unsigned long *) 0x80030320))
#define GPIO_3_RISE		(*((volatile unsigned long *) 0x80030330))
#define GPIO_3_FALL		(*((volatile unsigned long *) 0x80030334))
#define GPIO_4_DIR_SET	(*((volatile unsigned long *) 0x80030400))
#define GPIO_4_DIR_CLR	(*((volatile unsigned long *) 0x80030404))
#define GPIO_4_TRI_SET	(*((volatile unsigned long *) 0x80030408))
#define GPIO_4_TRI_CLR	(*((volatile unsigned long *) 0x8003040C))
#define GPIO_4_OUT_SET	(*((volatile unsigned long *) 0x80030410))
#define GPIO_4_OUT_CLR	(*((volatile unsigned long *) 0x80030414))
#define GPIO_4_IN		(*((volatile unsigned long *) 0x80030420))
#define GPIO_4_RISE		(*((volatile unsigned long *) 0x80030430))
#define GPIO_4_FALL		(*((volatile unsigned long *) 0x80030434))
#define GPIO_5_DIR_SET	(*((volatile unsigned long *) 0x80030500))
#define GPIO_5_DIR_CLR	(*((volatile unsigned long *) 0x80030504))
#define GPIO_5_TRI_SET	(*((volatile unsigned long *) 0x80030508))
#define GPIO_5_TRI_CLR	(*((volatile unsigned long *) 0x8003050C))
#define GPIO_5_OUT_SET	(*((volatile unsigned long *) 0x80030510))
#define GPIO_5_OUT_CLR	(*((volatile unsigned long *) 0x80030514))
#define GPIO_5_IN		(*((volatile unsigned long *) 0x80030520))
#define GPIO_5_LVL0_SET (*((volatile unsigned long *) 0x80030530))
#define GPIO_5_LVL1_SET	(*((volatile unsigned long *) 0x80030534))
#define GPIO_6_DIR_SET	(*((volatile unsigned long *) 0x80030600))
#define GPIO_6_DIR_CLR	(*((volatile unsigned long *) 0x80030604))
#define GPIO_6_TRI_SET	(*((volatile unsigned long *) 0x80030608))
#define GPIO_6_TRI_CLR	(*((volatile unsigned long *) 0x8003060C))
#define GPIO_6_OUT_SET	(*((volatile unsigned long *) 0x80030610))
#define GPIO_6_OUT_CLR	(*((volatile unsigned long *) 0x80030614))
#define GPIO_6_IN		(*((volatile unsigned long *) 0x80030620))
#define GPIO_6_RISE		(*((volatile unsigned long *) 0x80030630))
#define GPIO_6_FALL		(*((volatile unsigned long *) 0x80030634))
#define GPIO_7_DIR_SET	(*((volatile unsigned long *) 0x80030700))
#define GPIO_7_DIR_CLR	(*((volatile unsigned long *) 0x80030704))
#define GPIO_7_TRI_SET	(*((volatile unsigned long *) 0x80030708))
#define GPIO_7_TRI_CLR	(*((volatile unsigned long *) 0x8003070C))
#define GPIO_7_OUT_SET	(*((volatile unsigned long *) 0x80030710))
#define GPIO_7_OUT_CLR	(*((volatile unsigned long *) 0x80030714))
#define GPIO_7_IN		(*((volatile unsigned long *) 0x80030720))
#define GPIO_7_RISE		(*((volatile unsigned long *) 0x80030730))
#define GPIO_7_FALL		(*((volatile unsigned long *) 0x80030734))
#define GPIO_8_DIR_SET	(*((volatile unsigned long *) 0x80030800))
#define GPIO_8_DIR_CLR	(*((volatile unsigned long *) 0x80030804))
#define GPIO_8_TRI_SET	(*((volatile unsigned long *) 0x80030808))
#define GPIO_8_TRI_CLR	(*((volatile unsigned long *) 0x8003080C))
#define GPIO_8_OUT_SET	(*((volatile unsigned long *) 0x80030810))
#define GPIO_8_OUT_CLR	(*((volatile unsigned long *) 0x80030814))
#define GPIO_8_IN		(*((volatile unsigned long *) 0x80030820))
#define GPIO_8_RISE		(*((volatile unsigned long *) 0x80030830))
#define GPIO_8_FALL		(*((volatile unsigned long *) 0x80030834))
#define GPIO_9_DIR_SET	(*((volatile unsigned long *) 0x80030900))
#define GPIO_9_DIR_CLR	(*((volatile unsigned long *) 0x80030904))
#define GPIO_9_TRI_SET	(*((volatile unsigned long *) 0x80030908))
#define GPIO_9_TRI_CLR	(*((volatile unsigned long *) 0x8003090C))
#define GPIO_9_OUT_SET	(*((volatile unsigned long *) 0x80030910))
#define GPIO_9_OUT_CLR	(*((volatile unsigned long *) 0x80030914))
#define GPIO_9_IN		(*((volatile unsigned long *) 0x80030920))
#define GPIO_9_RISE		(*((volatile unsigned long *) 0x80030930))
#define GPIO_9_FALL		(*((volatile unsigned long *) 0x80030934))
#define GPIO_10_DIR_SET	(*((volatile unsigned long *) 0x80030A00))
#define GPIO_10_DIR_CLR	(*((volatile unsigned long *) 0x80030A04))
#define GPIO_10_TRI_SET	(*((volatile unsigned long *) 0x80030A08))
#define GPIO_10_TRI_CLR	(*((volatile unsigned long *) 0x80030A0C))
#define GPIO_10_OUT_SET	(*((volatile unsigned long *) 0x80030A10))
#define GPIO_10_OUT_CLR	(*((volatile unsigned long *) 0x80030A14))
#define GPIO_10_IN		(*((volatile unsigned long *) 0x80030A20))
#define GPIO_10_RISE	(*((volatile unsigned long *) 0x80030A30))
#define GPIO_10_FALL	(*((volatile unsigned long *) 0x80030A34))
#define GPIO_11_DIR_SET	(*((volatile unsigned long *) 0x80030B00))
#define GPIO_11_DIR_CLR	(*((volatile unsigned long *) 0x80030B04))
#define GPIO_11_TRI_SET	(*((volatile unsigned long *) 0x80030B08))
#define GPIO_11_TRI_CLR	(*((volatile unsigned long *) 0x80030B0C))
#define GPIO_11_OUT_SET	(*((volatile unsigned long *) 0x80030B10))
#define GPIO_11_OUT_CLR	(*((volatile unsigned long *) 0x80030B14))
#define GPIO_11_IN		(*((volatile unsigned long *) 0x80030B20))
#define GPIO_11_RISE	(*((volatile unsigned long *) 0x80030B30))
#define GPIO_11_FALL	(*((volatile unsigned long *) 0x80030B34))
#define GPIO_12_DIR_SET	(*((volatile unsigned long *) 0x80030C00))
#define GPIO_12_DIR_CLR	(*((volatile unsigned long *) 0x80030C04))
#define GPIO_12_TRI_SET	(*((volatile unsigned long *) 0x80030C08))
#define GPIO_12_TRI_CLR	(*((volatile unsigned long *) 0x80030C0C))
#define GPIO_12_OUT_SET	(*((volatile unsigned long *) 0x80030C10))
#define GPIO_12_OUT_CLR	(*((volatile unsigned long *) 0x80030C14))
#define GPIO_12_IN		(*((volatile unsigned long *) 0x80030C20))
#define GPIO_12_RISE	(*((volatile unsigned long *) 0x80030C30))
#define GPIO_12_FALL	(*((volatile unsigned long *) 0x80030C34))
#define GPIO_13_DIR_SET	(*((volatile unsigned long *) 0x80030D00))
#define GPIO_13_DIR_CLR	(*((volatile unsigned long *) 0x80030D04))
#define GPIO_13_TRI_SET	(*((volatile unsigned long *) 0x80030D08))
#define GPIO_13_TRI_CLR	(*((volatile unsigned long *) 0x80030D0C))
#define GPIO_13_OUT_SET	(*((volatile unsigned long *) 0x80030D10))
#define GPIO_13_OUT_CLR	(*((volatile unsigned long *) 0x80030D14))
#define GPIO_13_IN		(*((volatile unsigned long *) 0x80030D20))
#define GPIO_13_RISE	(*((volatile unsigned long *) 0x80030D30))
#define GPIO_13_FALL	(*((volatile unsigned long *) 0x80030D34))
#define GPIO_14_DIR_SET	(*((volatile unsigned long *) 0x80030E00))
#define GPIO_14_DIR_CLR	(*((volatile unsigned long *) 0x80030E04))
#define GPIO_14_TRI_SET	(*((volatile unsigned long *) 0x80030E08))
#define GPIO_14_TRI_CLR	(*((volatile unsigned long *) 0x80030E0C))
#define GPIO_14_OUT_SET	(*((volatile unsigned long *) 0x80030E10))
#define GPIO_14_OUT_CLR	(*((volatile unsigned long *) 0x80030E14))
#define GPIO_14_IN		(*((volatile unsigned long *) 0x80030E20))
#define GPIO_14_RISE	(*((volatile unsigned long *) 0x80030E30))
#define GPIO_14_FALL	(*((volatile unsigned long *) 0x80030E34))

#define GPIO_0_0_FALL 		(*((volatile unsigned long *) 0x81003E00))
#define GPIO_0_0_RISE 		(*((volatile unsigned long *) 0x81003E02))

#define GPIO_5_0_FALL		(*((volatile unsigned long *) 0x81003EA0))
#define GPIO_5_0_RISE		(*((volatile unsigned long *) 0x81003EA2))

#define GPIO_14_0_FALL 		(*((volatile unsigned long *) 0x81003FC0))
#define GPIO_14_0_RISE 		(*((volatile unsigned long *) 0x81003FC2))
#define GPIO_14_1_FALL 		(*((volatile unsigned long *) 0x81003FC4))
#define GPIO_14_1_RISE 		(*((volatile unsigned long *) 0x81003FC6))
#define GPIO_14_2_FALL 		(*((volatile unsigned long *) 0x81003FC8))
#define GPIO_14_2_RISE 		(*((volatile unsigned long *) 0x81003FCA))
#define GPIO_14_3_FALL 		(*((volatile unsigned long *) 0x81003FCC))
#define GPIO_14_3_RISE 		(*((volatile unsigned long *) 0x81003FCE))
#define GPIO_14_4_FALL 		(*((volatile unsigned long *) 0x81003FD0))
#define GPIO_14_4_RISE 		(*((volatile unsigned long *) 0x81003FD2))
#define GPIO_14_5_FALL 		(*((volatile unsigned long *) 0x81003FD4))
#define GPIO_14_5_RISE 		(*((volatile unsigned long *) 0x81003FD6))
#define GPIO_14_6_FALL 		(*((volatile unsigned long *) 0x81003FD8))
#define GPIO_14_6_RISE 		(*((volatile unsigned long *) 0x81003FDA))
#define GPIO_14_7_FALL 		(*((volatile unsigned long *) 0x81003FDC))
#define GPIO_14_7_RISE 		(*((volatile unsigned long *) 0x81003FDE))

#define TC_START 		(*((volatile unsigned long *) 0x80000000))
#define TC_KILL  		(*((volatile unsigned long *) 0x80000004))
#define CA_COM  		(*((volatile unsigned long *) 0x80001000))
#define CA_ET	 		(*((volatile unsigned long *) 0x80001004))
#define CA_CT 			(*((volatile unsigned long *) 0x80001008))
#define MP_OUT_0 		(*((volatile unsigned long *) 0x80002000))
#define MP_OUT_1 		(*((volatile unsigned long *) 0x80002004))
#define MP_OUT_2 		(*((volatile unsigned long *) 0x80002008))
#define MP_OUT_3 		(*((volatile unsigned long *) 0x8000200c))
#define MP_COM  		(*((volatile unsigned long *) 0x80002010))
#define MP_IN_0 		(*((volatile unsigned long *) 0x80002020))
#define MP_IN_1 		(*((volatile unsigned long *) 0x80002024))
#define MP_IN_2 		(*((volatile unsigned long *) 0x80002028))
#define MP_IN_3 		(*((volatile unsigned long *) 0x8000202c))
#define GPIO_EVENT_ADD  (*((volatile unsigned long *) 0x80031000))

void mp(unsigned tag, int start_time) {
	if (start_time >= 0) {
		MP_COM = 0x00000400 + (((unsigned)&&mp_label >> 1) & 0x3ff);
	} else
	{
		int i;
		mp_label:
			GPIO_1_OUT_SET = 0x1 << tag;
			TC_KILL = 0x0;
			asm volatile ("addi x0, x0, 0");
	}
}

int main(void)
{
	// write to core 2
	int CT = CA_CT;
	mp(0x0, CT);

    TC_KILL = 0x0;
    asm volatile ("addi x0, x0, 0");

}
